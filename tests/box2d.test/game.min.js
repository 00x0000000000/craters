!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){"use strict";n.r(e),n.d(e,"Vector",function(){return c}),n.d(e,"boundary",function(){return a}),n.d(e,"degToRad",function(){return i}),n.d(e,"radToDeg",function(){return s}),n.d(e,"distance",function(){return o}),n.d(e,"map",function(){return r});const i=function(t){return t*Math.PI/180},s=function(t){return 180*t/Math.PI},o=function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},r=function(t,e,n,i,s){return i+(s-i)*(t-e)/(n-e)},a=function(t,e,n){return Math.min(Math.max(t,e),n)},c=function(t,e){this.x=t||0,this.y=e||0};c.prototype={clone:function(){return new c(this.x,this.y)},set:function(t,e){return"x"===t?this.x=e:"y"===t&&(this.y=e),this},add:function(){let t,e,n=arguments;if(1===n.length){let i=n[0];"object"==typeof i&&(t=i.x,e=i.y)}else 2===n.length&&"number"==typeof n[0]&&"number"==typeof n[1]&&(t=n[0],e=n[1]);return this.x+=t,this.y+=e,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return"object"==typeof t?(this.x*=t.x,this.y*=t.y):"number"==typeof t&&(this.x*=t,this.y*=t),this},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},magnitudeSq:function(){return this.x*this.x+this.y*this.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},rotate:function(t){let e=Math.sin(t),n=Math.cos(t),i=this.x*n-this.y*e,s=this.x*e+this.y*n;return this.x=i,this.y=s,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},angleTo:function(t){let e=this.magnitude(),n=t.magnitude(),i=this.dot(t);return Math.acos(i/(e*n))},getAngle:function(t){if("DEGREES"===t)return s(Math.atan(this.y/this.x));let e=Math.atan2(this.y,this.x);return e<0?2*Math.PI+e:e},normalize:function(){let t=this.magnitude();return this.x/=t,this.y/=t,this},perp:function(t){if("right"===t){let t=this.x;this.x=this.y,this.y=-t}else{let t=this.x;this.x=-this.y,this.y=t}return this},distanceTo:function(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))},scalarProject:function(t){return this.dot(t)/t.magnitude()},scalarProjectUnit:function(t){return this.dot(t)},vectorProject:function(t){let e=this.dot(t)/t.magnitudeSq();return this.x=t.x*e,this.y=t.y*e,this},vectorProjectUnit:function(t){let e=this.dot(t);return this.x=t.x*e,this.y=t.y*e,this}},c.prototype.translate=c.prototype.add;c.add=function(t,e){return new c(t.x+e.x,t.y+e.y)},c.subtract=function(t,e){return new c(t.x-e.x,t.y-e.y)},c.multiply=function(t,e){return"number"==typeof t&&"number"==typeof e?t*e:"object"==typeof t&&"number"==typeof e?new c(t.x*e,t.y*e):"object"==typeof e&&"number"==typeof t?new c(t*e.x,t*e.y):new c(t.x*e.x,t.y*e.y)},c.dot=function(t,e){return t.x*e.x+t.y*e.y},c.angleBetween=function(t,e){let n=t.magnitude(),i=e.magnitude(),s=t.dot(e);return Math.acos(s/(n*i))},c.perp=function(t,e){switch(e){case"right":return new c(t.y,-t.x);default:return new c(-t.y,t.x)}},c.negate=function(t){return new c(-t.x,-t.y)}},function(t,e,n){t.exports=n(8)},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return r});var i=n(0);class s{constructor(){this.entities=[],this.state={size:new i.Vector(1024,512),gravity:new i.Vector(0,0),friction:new i.Vector(0,0)}}addObject(t){return this.entities.push(t)}removeObject(t){return this.entities.splice(t,1)}update(t,e){this.entities.forEach(t=>{switch(t.state.loop=this.state.loop,t.type){case"dynamic":t.state.vel.x+=t.state.accel.x+(t.state.gravity.x+this.state.gravity.x),t.state.vel.y+=t.state.accel.y+(t.state.gravity.y+this.state.gravity.y),t.state.pos.x+=t.state.vel.x*(1/((t.state.loop.delta+t.state.loop.nframe)/2)),t.state.pos.y+=t.state.vel.y*(1/((t.state.loop.delta+t.state.loop.nframe)/2));var e=t.state.friction.x,n=t.state.vel.x+e,i=t.state.vel.x-e,s=t.state.friction.y,o=t.state.vel.y+s,r=t.state.vel.y-s;t.state.vel.x=n<0?n:i>0?i:0,t.state.vel.y=o<0?o:r>0?r:0;break;case"static":t.state.vel.x+=t.state.accel.x,t.state.vel.y+=t.state.accel.y,t.state.pos.x+=t.state.vel.x,t.state.pos.y+=t.state.vel.y}t.update()})}render(){this.entities.forEach(t=>{t.render()})}}class o extends s{constructor(){super(),this.state.size=new i.Vector(20,20),this.state.pos=new i.Vector(0,0),this.state.vel=new i.Vector(0,0),this.state.accel=new i.Vector(0,0),this.state.radius=20,this.state.angle=0,this.type="dynamic"}}class r extends o{constructor(t,e){super(),this.scope=t,this.state.pos=e.pos||new i.Vector(0,0),this.state.crop=new i.Vector(0,0),this.state.size=e.size||new i.Vector(0,0),this.state.frames=e.frames||[],this.state.angle=e.angle||0,this.state.image=e.image||new Image,this.state.delay=e.delay||5,this.state.tick=e.tick||0,this.state.orientation=e.orientation||"horizontal"}update(){super.update(),this.state.tick<=0&&("vertical"===this.orientation?(this.state.crop.y=this.state.frames.shift(),this.state.frames.push(this.state.crop.y)):(this.state.crop.x=this.state.frames.shift(),this.state.frames.push(this.state.crop.x)),this.state.tick=this.state.delay),this.state.tick--}render(){super.render(),this.scope.context.save(),this.scope.context.translate(this.state.crop.x+this.state.size.x/2,this.state.crop.y+this.state.size.y/2),this.scope.context.rotate(this.state.angle*(Math.PI/180)),this.scope.context.translate(-(this.state.crop.x+this.state.size.x/2),-(this.state.crop.y+this.state.size.y/2)),this.scope.context.drawImage(this.state.image,this.state.crop.x*this.state.size.x,this.state.crop.y*this.state.size.y,this.state.size.x,this.state.size.y,this.state.pos.x,this.state.pos.y,this.state.size.x,this.state.size.y),this.scope.context.restore()}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i});class i{constructor(t,e){var n={elapsed:0,tframe:1e3/e,nframe:e,before:window.performance.now(),main:function(){n.startLoop=window.requestAnimationFrame(n.main),n.delta=Math.round(1e3/(window.performance.now()-n.before)*100/100),window.performance.now()<n.before+n.tframe||(n.before=window.performance.now(),n.stopLoop=()=>{window.cancelAnimationFrame(n.startLoop)},t.state.loop=n,t.update(n.elapsed,n.delta),t.render(n.elapsed,n.delta),n.elapsed++)}};return n.main(),n}}class s{constructor(t,e,n){n=document.querySelector(n||"body");var i=document.createElement("canvas"),s=i.getContext("2d"),o=window.devicePixelRatio/["webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio"].reduce(function(t,e){return Object.prototype.hasOwnProperty.call(s,e)?s[e]:1});return i.width=Math.round(t*o),i.height=Math.round(e*o),i.style.width=t+"px",i.style.height=e+"px",s.setTransform(o,0,0,o,0,0),n.insertBefore(i,n.firstChild),i.context=i.getContext("2d"),i.resize=(t,e)=>{i.style.width=e.x+"px",i.style.height=e.y+"px",i.width=Math.round(e.x*o),i.height=Math.round(e.y*o),s.setTransform(o,0,0,o,0,0),t.state.size.x=e.x,t.state.size.y=e.y},i.clear=(t,e,n,s,o)=>{t=t||null,e=e||0,n=n||0,s=s||i.width,o=o||i.height,t?(i.context.save(),i.context.fillStyle=t,i.context.fillRect(e,n,s,o),i.context.fill(),i.context.restore()):i.context.clearRect(e,n,s,o)},i.camera=(t,e)=>{i.context.setTransform(1,0,0,1,0,0),i.context.translate(-t,-e)},i}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});class i{constructor(){this.rescache={}}load(t,e){var n=this;t instanceof Array?t.forEach(function(t){n.rescache[t]=!1,n.fetch(t,e)}):(n.rescache[t]=!1,n.fetch(t,e))}fetch(t,e){var n=this;if(n.rescache[t])return n.rescache[t];var i=new Image;i.onload=function(){n.rescache[t]=i,n.ready(e)},i.src=t}ready(t){if("function"==typeof t){var e=!0;for(var n in this.rescache)Object.prototype.hasOwnProperty.call(this.rescache,n)&&!this.rescache[n]&&(e=!1);e&&t()}}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});class i{constructor(){this.sounds={},this.instances=[],this.defaultVolume=1}load(t,e,n){if(this.sounds[t]=new Audio(e),"function"!=typeof n)return new Promise((e,n)=>{this.sounds[t].addEventListener("canplaythrough",e),this.sounds[t].addEventListener("error",n)});this.sounds[t].addEventListener("canplaythrough",n)}remove(t){void 0!==this.sounds&&delete this.sounds[t]}unlock(t,e,n,i){var s=this,o=["touchstart","touchend","mousedown","keydown"],r=function r(){o.forEach(function(t){document.body.removeEventListener(t,r)}),s.play(t,e,n,i)};o.forEach(function(t){document.body.addEventListener(t,r,!1)})}play(t,e,n,i){if(i=i||!1,void 0===this.sounds[t])return console.error("Can't find sound called '"+t+"'."),!1;var s=this.sounds[t].cloneNode(!0);return s.volume="number"==typeof n?n:this.defaultVolume,s.loop=i,s.play(),this.instances.push(s),s.addEventListener("ended",()=>{var t=this.instances.indexOf(s);-1!==t&&this.instances.splice(t,1)}),"function"==typeof e?(s.addEventListener("ended",e),!0):new Promise((t,e)=>s.addEventListener("ended",t))}stopAll(){var t=this.instances.slice();for(var e of t)e.pause(),e.dispatchEvent(new Event("ended"))}}},function(t,e,n){"use strict";n.r(e);var i=n(1);class s extends i.Entity{constructor(t){super(),this.scope=t,this.state.pos=new i.Maths.Vector(this.scope.state.size.x/2+50*(Math.random()-.5),this.scope.state.size.x/2+50*(Math.random()-.5)),this.state.radius=50*Math.random()+10,this.type="static";var e=new Box2D.Dynamics.b2BodyDef;e.position=new Box2D.Common.Math.b2Vec2((this.state.pos.x+this.state.size.x/2)*Box2D.SCALE,(this.state.pos.y+this.state.size.y/2)*Box2D.SCALE),e.type=Box2D.Dynamics.b2Body.b2_dynamicBody,this.body=this.scope.world.CreateBody(e);var n=new Box2D.Dynamics.b2FixtureDef;n.shape=new Box2D.Collision.Shapes.b2CircleShape(this.state.radius),n.density=1,n.friction=10.5,n.restitution=.3,this.body.CreateFixture(n),this.body.ApplyImpulse(new Box2D.Common.Math.b2Vec2(100*(Math.random()-.5),100*(Math.random()-.7)),this.body.GetPosition())}render(){this.state.pos=this.body.GetPosition(),this.scope.context.beginPath(),this.scope.context.arc(this.state.pos.x,this.state.pos.y,this.state.radius,0,2*Math.PI),this.scope.context.lineWidth=1,this.scope.context.strokeStyle="#000",this.scope.context.fillStyle="green",this.scope.context.fill(),this.scope.context.stroke()}}new class extends i.Game{constructor(t,e,n){super(),this.state.size={x:e,y:n},this.loop=new i.Loop(this,60),this.viewport=new i.Canvas(this.state.size.x,this.state.size.y,t),this.context=this.viewport.context,this.viewport.style.background="#eee",this.viewport.resize(this,{x:window.innerWidth,y:window.innerHeight}),Box2D.SCALE=1,this.state.gravity.y=100;var o=new Box2D.Common.Math.b2Vec2(0,this.state.gravity.y);this.world=new Box2D.Dynamics.b2World(o,!0);var r=new Box2D.Dynamics.b2BodyDef;r.type=Box2D.Dynamics.b2Body.b2_staticBody;var a=new Box2D.Dynamics.b2FixtureDef;a.density=1,a.friction=.5,a.restitution=.2,a.shape=new Box2D.Collision.Shapes.b2PolygonShape,a.shape.SetAsBox(this.state.size.x,10),r.position=new Box2D.Common.Math.b2Vec2(0,this.state.size.y),this.world.CreateBody(r).CreateFixture(a);for(var c=0;c<25;c++){let t=this.addObject(new s(this))-1;this.entities[t].id=t}}update(t,e){this.world.Step(1/e,10,10),this.world.ClearForces(),super.update()}render(){this.viewport.clear(),super.render()}}("#container",1024,512)},function(t,e,n){"use strict";n.r(e),function(t,i){n.d(e,"Craters",function(){return u});var s=n(0);n.d(e,"Maths",function(){return s});var o=n(4);n.d(e,"Canvas",function(){return o.a}),n.d(e,"Loop",function(){return o.b});var r=n(2);n.d(e,"Game",function(){return r.b}),n.d(e,"Entity",function(){return r.a}),n.d(e,"Sprite",function(){return r.c});var a=n(5);n.d(e,"Loader",function(){return a.a});var c=n(6);n.d(e,"Sound",function(){return c.a}),"undefined"==typeof window&&t&&(t.window={performance:{now:function(t){if(!t)return Date.now();var e=Date.now(t);return Math.round(1e3*e[0]+e[1]/1e6)}},requestAnimationFrame:function(t){i(()=>t(this.performance.now()))}});class u{static version(){return"1.2.2"}}}.call(this,n(3),n(9).setImmediate)},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(s.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(s.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(10),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,s,o,r,a,c=1,u={},h=!1,l=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},i=function(t){o.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(s=l.documentElement,i=function(t){var e=l.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,s.removeChild(e),e=null},s.appendChild(e)}):i=function(t){setTimeout(p,0,t)}:(r="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(r)&&p(+e.data.slice(r.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(e){t.postMessage(r+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return u[c]=s,i(c),c++},d.clearImmediate=f}function f(t){delete u[t]}function p(t){if(h)setTimeout(p,0,t);else{var e=u[t];if(e){h=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{f(t),h=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(3),n(11))},function(t,e){var n,i,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}}();var c,u=[],h=!1,l=-1;function d(){h&&c&&(h=!1,c.length?u=c.concat(u):l=-1,u.length&&f())}function f(){if(!h){var t=a(d);h=!0;for(var e=u.length;e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||h||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=y,s.addListener=y,s.once=y,s.off=y,s.removeListener=y,s.removeAllListeners=y,s.emit=y,s.prependListener=y,s.prependOnceListener=y,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}]);