!function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){var o,n;
/** @preserve SAT.js - Version 0.8.0 - Copyright 2012 - 2018 - Jim Riecken <jimr@jimr.ca> - released under the MIT License. https://github.com/jriecken/sat-js */
/** @preserve SAT.js - Version 0.8.0 - Copyright 2012 - 2018 - Jim Riecken <jimr@jimr.ca> - released under the MIT License. https://github.com/jriecken/sat-js */
!function(i,s){"use strict";void 0===(n="function"==typeof(o=function(){var t={};function e(t,e){this.x=t||0,this.y=e||0}function r(t,r){this.pos=t||new e,this.r=r||0,this.offset=new e}function o(t,r){this.pos=t||new e,this.angle=0,this.offset=new e,this.setPoints(r||[])}function n(t,r,o){this.pos=t||new e,this.w=r||0,this.h=o||0}function i(){this.a=null,this.b=null,this.overlapN=new e,this.overlapV=new e,this.clear()}t.Vector=e,t.V=e,e.prototype.copy=e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.perp=e.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this},e.prototype.rotate=e.prototype.rotate=function(t){var e=this.x,r=this.y;return this.x=e*Math.cos(t)-r*Math.sin(t),this.y=e*Math.sin(t)+r*Math.cos(t),this},e.prototype.reverse=e.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.normalize=e.prototype.normalize=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},e.prototype.add=e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.sub=e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.scale=e.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0!==e?e:t,this},e.prototype.project=e.prototype.project=function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this},e.prototype.projectN=e.prototype.projectN=function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this},e.prototype.reflect=e.prototype.reflect=function(t){var e=this.x,r=this.y;return this.project(t).scale(2),this.x-=e,this.y-=r,this},e.prototype.reflectN=e.prototype.reflectN=function(t){var e=this.x,r=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=r,this},e.prototype.dot=e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len2=e.prototype.len2=function(){return this.dot(this)},e.prototype.len=e.prototype.len=function(){return Math.sqrt(this.len2())},t.Circle=r,r.prototype.getAABB=r.prototype.getAABB=function(){var t=this.r,r=this.pos.clone().add(this.offset).sub(new e(t,t));return new n(r,2*t,2*t).toPolygon()},r.prototype.setOffset=r.prototype.setOffset=function(t){return this.offset=t,this},t.Polygon=o,o.prototype.setPoints=o.prototype.setPoints=function(t){var r=!this.points||this.points.length!==t.length;if(r){var o,n=this.calcPoints=[],i=this.edges=[],s=this.normals=[];for(o=0;o<t.length;o++){var a=t[o],h=o<t.length-1?t[o+1]:t[0];a===h||a.x!==h.x||a.y!==h.y?(n.push(new e),i.push(new e),s.push(new e)):(t.splice(o,1),o-=1)}}return this.points=t,this._recalc(),this},o.prototype.setAngle=o.prototype.setAngle=function(t){return this.angle=t,this._recalc(),this},o.prototype.setOffset=o.prototype.setOffset=function(t){return this.offset=t,this._recalc(),this},o.prototype.rotate=o.prototype.rotate=function(t){for(var e=this.points,r=e.length,o=0;o<r;o++)e[o].rotate(t);return this._recalc(),this},o.prototype.translate=o.prototype.translate=function(t,e){for(var r=this.points,o=r.length,n=0;n<o;n++)r[n].x+=t,r[n].y+=e;return this._recalc(),this},o.prototype._recalc=function(){var t,e=this.calcPoints,r=this.edges,o=this.normals,n=this.points,i=this.offset,s=this.angle,a=n.length;for(t=0;t<a;t++){var h=e[t].copy(n[t]);h.x+=i.x,h.y+=i.y,0!==s&&h.rotate(s)}for(t=0;t<a;t++){var p=e[t],c=t<a-1?e[t+1]:e[0],u=r[t].copy(c).sub(p);o[t].copy(u).perp().normalize()}return this},o.prototype.getAABB=o.prototype.getAABB=function(){for(var t=this.calcPoints,r=t.length,o=t[0].x,i=t[0].y,s=t[0].x,a=t[0].y,h=1;h<r;h++){var p=t[h];p.x<o?o=p.x:p.x>s&&(s=p.x),p.y<i?i=p.y:p.y>a&&(a=p.y)}return new n(this.pos.clone().add(new e(o,i)),s-o,a-i).toPolygon()},o.prototype.getCentroid=o.prototype.getCentroid=function(){for(var t=this.calcPoints,r=t.length,o=0,n=0,i=0,s=0;s<r;s++){var a=t[s],h=s===r-1?t[0]:t[s+1],p=a.x*h.y-h.x*a.y;o+=(a.x+h.x)*p,n+=(a.y+h.y)*p,i+=p}return new e(o/=i*=3,n/=i)},t.Box=n,n.prototype.toPolygon=n.prototype.toPolygon=function(){var t=this.pos,r=this.w,n=this.h;return new o(new e(t.x,t.y),[new e,new e(r,0),new e(r,n),new e(0,n)])},t.Response=i,i.prototype.clear=i.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var s=[],a=0;a<10;a++)s.push(new e);for(var h=[],a=0;a<5;a++)h.push([]);var p=new i,c=new n(new e,1e-6,1e-6).toPolygon();function u(t,e,r){for(var o=Number.MAX_VALUE,n=-Number.MAX_VALUE,i=t.length,s=0;s<i;s++){var a=t[s].dot(e);a<o&&(o=a),a>n&&(n=a)}r[0]=o,r[1]=n}function l(t,e,r,o,n,i){var a=h.pop(),p=h.pop(),c=s.pop().copy(e).sub(t),l=c.dot(n);if(u(r,n,a),u(o,n,p),p[0]+=l,p[1]+=l,a[0]>p[1]||p[0]>a[1])return s.push(c),h.push(a),h.push(p),!0;if(i){var y=0;if(a[0]<p[0])if(i.aInB=!1,a[1]<p[1])y=a[1]-p[0],i.bInA=!1;else{var f=a[1]-p[0],x=p[1]-a[0];y=f<x?f:-x}else if(i.bInA=!1,a[1]>p[1])y=a[0]-p[1],i.aInB=!1;else{var f=a[1]-p[0],x=p[1]-a[0];y=f<x?f:-x}var d=Math.abs(y);d<i.overlap&&(i.overlap=d,i.overlapN.copy(n),y<0&&i.overlapN.reverse())}return s.push(c),h.push(a),h.push(p),!1}function y(t,e){var r=t.len2(),o=e.dot(t);return o<0?f:o>r?d:x}t.isSeparatingAxis=l;var f=-1,x=0,d=1;function v(t,e,r){for(var o=s.pop().copy(e.pos).add(e.offset).sub(t.pos),n=e.r,i=n*n,a=t.calcPoints,h=a.length,p=s.pop(),c=s.pop(),u=0;u<h;u++){var l=u===h-1?0:u+1,x=0===u?h-1:u-1,v=0,g=null;p.copy(t.edges[u]),c.copy(o).sub(a[u]),r&&c.len2()>i&&(r.aInB=!1);var w=y(p,c);if(w===f){p.copy(t.edges[x]);var b=s.pop().copy(o).sub(a[x]);if((w=y(p,b))===d){var m=c.len();if(m>n)return s.push(o),s.push(p),s.push(c),s.push(b),!1;r&&(r.bInA=!1,g=c.normalize(),v=n-m)}s.push(b)}else if(w===d){if(p.copy(t.edges[l]),c.copy(o).sub(a[l]),(w=y(p,c))===f){var m=c.len();if(m>n)return s.push(o),s.push(p),s.push(c),!1;r&&(r.bInA=!1,g=c.normalize(),v=n-m)}}else{var P=p.perp().normalize(),m=c.dot(P),M=Math.abs(m);if(m>0&&M>n)return s.push(o),s.push(P),s.push(c),!1;r&&(g=P,v=n-m,(m>=0||v<2*n)&&(r.bInA=!1))}g&&r&&Math.abs(v)<Math.abs(r.overlap)&&(r.overlap=v,r.overlapN.copy(g))}return r&&(r.a=t,r.b=e,r.overlapV.copy(r.overlapN).scale(r.overlap)),s.push(o),s.push(p),s.push(c),!0}function g(t,e,r){for(var o=t.calcPoints,n=o.length,i=e.calcPoints,s=i.length,a=0;a<n;a++)if(l(t.pos,e.pos,o,i,t.normals[a],r))return!1;for(var a=0;a<s;a++)if(l(t.pos,e.pos,o,i,e.normals[a],r))return!1;return r&&(r.a=t,r.b=e,r.overlapV.copy(r.overlapN).scale(r.overlap)),!0}return t.pointInCircle=function(t,e){var r=s.pop().copy(t).sub(e.pos).sub(e.offset),o=e.r*e.r,n=r.len2();return s.push(r),n<=o},t.pointInPolygon=function(t,e){c.pos.copy(t),p.clear();var r=g(c,e,p);return r&&(r=p.aInB),r},t.testCircleCircle=function(t,e,r){var o=s.pop().copy(e.pos).add(e.offset).sub(t.pos).sub(t.offset),n=t.r+e.r,i=n*n,a=o.len2();if(a>i)return s.push(o),!1;if(r){var h=Math.sqrt(a);r.a=t,r.b=e,r.overlap=n-h,r.overlapN.copy(o.normalize()),r.overlapV.copy(o).scale(r.overlap),r.aInB=t.r<=e.r&&h<=e.r-t.r,r.bInA=e.r<=t.r&&h<=t.r-e.r}return s.push(o),!0},t.testPolygonCircle=v,t.testCirclePolygon=function(t,e,r){var o=v(e,t,r);if(o&&r){var n=r.a,i=r.aInB;r.overlapN.reverse(),r.overlapV.reverse(),r.a=r.b,r.b=n,r.aInB=r.bInA,r.bInA=i}return o},t.testPolygonPolygon=g,t})?o.call(e,r,e,t):o)||(t.exports=n)}()},function(t,e,r){"use strict";r.r(e);class o{constructor(t,e){var r={elapsed:0,tframe:1e3/e,nframe:e,before:window.performance.now(),main:function(){r.startLoop=window.requestAnimationFrame(r.main),r.delta=Math.round(1e3/(window.performance.now()-r.before)*100/100),window.performance.now()<r.before+r.tframe||(r.before=window.performance.now(),r.stopLoop=()=>{window.cancelAnimationFrame(r.startLoop)},t.state.loop=r,t.update(r.elapsed,r.delta),t.render(r.elapsed,r.delta),r.elapsed++)}};return r.main(),r}}class n{constructor(t,e,r){r=document.querySelector(r||"body");var o=document.createElement("canvas"),n=o.getContext("2d"),i=window.devicePixelRatio/["webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio"].reduce(function(t,e){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:1});return o.width=Math.round(t*i),o.height=Math.round(e*i),o.style.width=t+"px",o.style.height=e+"px",n.setTransform(i,0,0,i,0,0),r.insertBefore(o,r.firstChild),o.context=o.getContext("2d"),o.resize=(t,e)=>{o.style.width=e.x+"px",o.style.height=e.y+"px",o.width=Math.round(e.x*i),o.height=Math.round(e.y*i),n.setTransform(i,0,0,i,0,0),t.state.size.x=e.x,t.state.size.y=e.y},o.clear=(t,e,r,n,i)=>{t=t||null,e=e||0,r=r||0,n=n||o.width,i=i||o.height,t?(o.context.save(),o.context.fillStyle=t,o.context.fillRect(e,r,n,i),o.context.fill(),o.context.restore()):o.context.clearRect(e,r,n,i)},o.camera=(t,e)=>{o.context.setTransform(1,0,0,1,0,0),o.context.translate(-t,-e)},o}}class i{constructor(){this.rescache={}}load(t,e){var r=this;t instanceof Array?t.forEach(function(t){r.rescache[t]=!1,r.fetch(t,e)}):(r.rescache[t]=!1,r.fetch(t,e))}fetch(t,e){var r=this;if(r.rescache[t])return r.rescache[t];var o=new Image;o.onload=function(){r.rescache[t]=o,r.ready(e)},o.src=t}ready(t){if("function"==typeof t){var e=!0;for(var r in this.rescache)Object.prototype.hasOwnProperty.call(this.rescache,r)&&!this.rescache[r]&&(e=!1);e&&t()}}}const s=function(t,e){this.x=t||0,this.y=e||0};(s.prototype={clone:function(){return new s(this.x,this.y)},set:function(t,e){return"x"===t?this.x=e:"y"===t&&(this.y=e),this},add:function(){let t,e,r=arguments;if(1===r.length){let o=r[0];"object"==typeof o&&(t=o.x,e=o.y)}else 2===r.length&&"number"==typeof r[0]&&"number"==typeof r[1]&&(t=r[0],e=r[1]);return this.x+=t,this.y+=e,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return"object"==typeof t?(this.x*=t.x,this.y*=t.y):"number"==typeof t&&(this.x*=t,this.y*=t),this},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},magnitudeSq:function(){return this.x*this.x+this.y*this.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},rotate:function(t){let e=Math.sin(t),r=Math.cos(t),o=this.x*r-this.y*e,n=this.x*e+this.y*r;return this.x=o,this.y=n,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},angleTo:function(t){let e=this.magnitude(),r=t.magnitude(),o=this.dot(t);return Math.acos(o/(e*r))},getAngle:function(t){if("DEGREES"===t)return 180*Math.atan(this.y/this.x)/Math.PI;let e=Math.atan2(this.y,this.x);return e<0?2*Math.PI+e:e},normalize:function(){let t=this.magnitude();return this.x/=t,this.y/=t,this},perp:function(t){if("right"===t){let t=this.x;this.x=this.y,this.y=-t}else{let t=this.x;this.x=-this.y,this.y=t}return this},distanceTo:function(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))},scalarProject:function(t){return this.dot(t)/t.magnitude()},scalarProjectUnit:function(t){return this.dot(t)},vectorProject:function(t){let e=this.dot(t)/t.magnitudeSq();return this.x=t.x*e,this.y=t.y*e,this},vectorProjectUnit:function(t){let e=this.dot(t);return this.x=t.x*e,this.y=t.y*e,this}}).translate=s.prototype.add;s.add=function(t,e){return new s(t.x+e.x,t.y+e.y)},s.subtract=function(t,e){return new s(t.x-e.x,t.y-e.y)},s.multiply=function(t,e){return"number"==typeof t&&"number"==typeof e?t*e:"object"==typeof t&&"number"==typeof e?new s(t.x*e,t.y*e):"object"==typeof e&&"number"==typeof t?new s(t*e.x,t*e.y):new s(t.x*e.x,t.y*e.y)},s.dot=function(t,e){return t.x*e.x+t.y*e.y},s.angleBetween=function(t,e){let r=t.magnitude(),o=e.magnitude(),n=t.dot(e);return Math.acos(n/(r*o))},s.perp=function(t,e){switch(e){case"right":return new s(t.y,-t.x);default:return new s(-t.y,t.x)}},s.negate=function(t){return new s(-t.x,-t.y)};var a=r(0);a.Vector,a.Circle,a.Polygon;class h{constructor(t){this.entities=[],this.state={size:{width:t.size.width,height:t.size.height},gravity:t.gravity},this.resources=new i(t.resources,()=>{console.info("resources loaded")}),this.loop=new o(this,t.fps),this.viewport=new n(100,100,"body"),this.context=this.viewport.context}addObject(t){return this.entities.push(t)}removeObject(t){return this.entities.splice(t,1)}update(t,e){this.entities.forEach(t=>{this.applyforces(t),t.update()})}render(){this.viewport.clear(),this.entities.forEach(t=>{t.render()})}applyforces(t){switch(t.type){case"static":case"dynamic":case"kinematic":t.state.vel.x+=t.state.accel.x,t.state.vel.y+=t.state.accel.y,t.state.pos.x+=t.state.vel.x,t.state.pos.y+=t.state.vel.y;break;default:throw new Error("invalid body type")}}}new class extends h{constructor(){super({fps:60,container:"#container",size:{width:1024,height:512}}),this.viewport.style.background="#eee",this.viewport.resize(this,{x:window.innerWidth,y:window.innerHeight})}update(t,e){super.update()}render(){super.render(),this.context.fillStyle="#fff",this.context.font="2em Arial",this.context.fillText("It's working.️",65,this.state.size.y/2,this.state.size.x)}}}]);