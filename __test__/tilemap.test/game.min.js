!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=6)}([function(t,e,s){t.exports=s(7)},function(t,e,s){"use strict";s.d(e,"a",function(){return i}),s.d(e,"b",function(){return n}),s.d(e,"c",function(){return r});class n{constructor(t,e,s,n,i){this.entities=[],this.state={container:t,size:{x:512,y:512},gravity:{x:0,y:0},friction:{x:0,y:0}}}addObject(t){this.entities.push(t)}removeObject(t){this.entities.splice(t,1)}update(){this.entities.forEach(t=>{switch(t.update(),t.type){case"dynamic":t.state.vel.x+=t.state.accel.x+(t.state.gravity.x+this.state.gravity.x),t.state.vel.y+=t.state.accel.y+(t.state.gravity.y+this.state.gravity.y),t.state.pos.x+=t.state.vel.x,t.state.pos.y+=t.state.vel.y;var e=t.state.friction.x,s=t.state.vel.x+e,n=t.state.vel.x-e,i=t.state.friction.y,r=t.state.vel.y+i,a=t.state.vel.y-i;t.state.vel.x=s<0?s:n>0?n:0,t.state.vel.y=r<0?r:a>0?a:0;break;case"kinematic":t.state.vel.x+=t.state.accel.x,t.state.vel.y+=t.state.accel.y,t.state.pos.x+=t.state.vel.x,t.state.pos.y+=t.state.vel.y}})}render(){this.entities.forEach(t=>{t.render()})}}class i extends n{constructor(){super(),this.state.size={x:10,y:10},this.state.pos={x:0,y:0},this.state.vel={x:0,y:0},this.state.accel={x:0,y:0},this.state.radius=10,this.state.angle=0,this.type="dynamic"}}class r extends i{constructor(t,e){super(),this.scope=t,this.state.pos=e.pos||{x:0,y:0},this.state.crop={x:0,y:0},this.state.size=e.size||{x:0,y:0},this.state.frames=e.frames||[],this.state.angle=e.angle||0,this.state.image=e.image||new Image,this.state.delay=e.delay||5,this.state.tick=e.tick||0,this.state.orientation=e.orientation||"horizontal"}update(){super.update(),this.state.tick<=0&&("vertical"===this.orientation?(this.state.crop.y=this.state.frames.shift(),this.state.frames.push(this.state.crop.y)):(this.state.crop.x=this.state.frames.shift(),this.state.frames.push(this.state.crop.x)),this.state.tick=this.state.delay),this.state.tick--}render(){super.render(),this.scope.context.save(),this.scope.context.translate(this.state.crop.x+this.state.size.x/2,this.state.crop.y+this.state.size.y/2),this.scope.context.rotate(this.state.angle*(Math.PI/180)),this.scope.context.translate(-(this.state.crop.x+this.state.size.x/2),-(this.state.crop.y+this.state.size.y/2)),this.scope.context.drawImage(this.state.image,this.state.crop.x*this.state.size.x,this.state.crop.y*this.state.size.y,this.state.size.x,this.state.size.y,this.state.pos.x,this.state.pos.y,this.state.size.x,this.state.size.y),this.scope.context.restore()}}},function(t,e){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}t.exports=s},function(t,e,s){"use strict";s.d(e,"a",function(){return i}),s.d(e,"b",function(){return n});class n{constructor(t,e){var s={elapsed:0,tframe:1e3/e,before:window.performance.now(),main:function(){s.startLoop=window.requestAnimationFrame(s.main),s.fps=Math.round(1e3/(window.performance.now()-s.before)*100/100),window.performance.now()<s.before+s.tframe||(s.before=window.performance.now(),s.stopLoop=()=>{window.cancelAnimationFrame(s.startLoop)},t.update(s.elapsed,s.fps),t.render(s.elapsed,s.fps),s.elapsed++)}};return s.main(),s}}class i{constructor(t,e,s){s=document.querySelector(s||"body");var n=document.createElement("canvas"),i=n.getContext("2d"),r=window.devicePixelRatio/["webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio"].reduce(function(t,e){return Object.prototype.hasOwnProperty.call(i,e)?i[e]:1});return n.width=Math.round(t*r),n.height=Math.round(e*r),n.style.width=t+"px",n.style.height=e+"px",i.setTransform(r,0,0,r,0,0),s.insertBefore(n,s.firstChild),n.context=n.getContext("2d"),n.resize=(t,e)=>{n.style.width=e.x+"px",n.style.height=e.y+"px",n.width=Math.round(e.x*r),n.height=Math.round(e.y*r),i.setTransform(r,0,0,r,0,0),t.state.size.x=e.x,t.state.size.y=e.y},n.clear=(t,e,s,i)=>{t=t||0,e=e||0,s=s||n.width,i=i||n.height,n.context.clearRect(t,e,s,i)},n.camera=(t,e)=>{n.context.setTransform(1,0,0,1,0,0),n.context.translate(-t,-e)},n}}},function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this.rescache={}}load(t,e){var s=this;t instanceof Array?t.forEach(function(t){s.rescache[t]=!1,s.fetch(t,e)}):(s.rescache[t]=!1,s.fetch(t,e))}fetch(t,e){var s=this;if(s.rescache[t])return s.rescache[t];var n=new Image;n.onload=function(){s.rescache[t]=n,s.ready(e)},n.src=t}ready(t){if("function"==typeof t){var e=!0;for(var s in this.rescache)Object.prototype.hasOwnProperty.call(this.rescache,s)&&!this.rescache[s]&&(e=!1);e&&t()}}}},function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{constructor(){this.sounds={},this.instances=[],this.defaultVolume=1}load(t,e,s){if(this.sounds[t]=new Audio(e),"function"!=typeof s)return new Promise((e,s)=>{this.sounds[t].addEventListener("canplaythrough",e),this.sounds[t].addEventListener("error",s)});this.sounds[t].addEventListener("canplaythrough",s)}remove(t){void 0!==this.sounds&&delete this.sounds[t]}unlock(t,e,s,n){var i=this,r=["touchstart","touchend","mousedown","keydown"],a=function a(){r.forEach(function(t){document.body.removeEventListener(t,a)}),i.play(t,e,s,n)};r.forEach(function(t){document.body.addEventListener(t,a,!1)})}play(t,e,s,n){if(n=n||!1,void 0===this.sounds[t])return console.error("Can't find sound called '"+t+"'."),!1;var i=this.sounds[t].cloneNode(!0);return i.volume="number"==typeof s?s:this.defaultVolume,i.loop=n,i.play(),this.instances.push(i),i.addEventListener("ended",()=>{var t=this.instances.indexOf(i);-1!==t&&this.instances.splice(t,1)}),"function"==typeof e?(i.addEventListener("ended",e),!0):new Promise((t,e)=>i.addEventListener("ended",t))}stopAll(){var t=this.instances.slice();for(var e of t)e.pause(),e.dispatchEvent(new Event("ended"))}}},function(t,e,s){"use strict";s.r(e);var n=s(0);class i extends n.Game{constructor(t,e,s){super(),this.state.size={x:e,y:s},this.loop=new n.Loop(this,60),this.viewport=new n.Canvas(this.state.size.x,this.state.size.y,t),this.context=this.viewport.context,this.viewport.style.background="#eee",this.viewport.resize(this,{x:window.innerWidth,y:window.innerHeight}),this.Tilemap=new a(this,{image:o.fetch("./tilemap.png"),map:{t:32,w:32,h:32,z:1,m:[[0,14,2],[1,14,2],[2,14,2],[3,14,2],[4,14,2],[5,14,2],[6,14,2],[7,14,2],[14,14,2],[15,14,2],[16,14,2],[17,14,2],[18,14,2],[33,14,2],[34,14,2],[35,14,2],[36,14,2],[37,14,2],[38,14,2],[39,14,2],[39,13,2],[38,13,2],[37,13,2],[36,13,2],[35,13,2],[34,13,2],[32,14,2],[31,14,2],[30,14,2],[29,14,2],[28,14,2],[27,14,2],[26,14,2],[25,14,2],[24,14,2],[23,14,2],[22,14,2],[21,14,2],[20,14,2],[19,14,2],[19,13,2],[18,13,2],[17,13,2],[16,13,2],[15,13,2],[14,13,2],[20,13,2],[21,13,2],[22,13,2],[23,13,2],[24,13,2],[25,13,2],[26,13,2],[27,13,2],[28,13,2],[29,13,2],[30,13,2],[31,13,2],[32,13,2],[33,13,2],[7,13,2],[6,13,2],[5,13,2],[4,13,2],[3,13,2],[2,13,2],[1,13,2],[0,13,2],[8,13,2],[8,14,2],[9,14,2],[9,13,2],[16,10,10],[17,10,11],[16,11,26],[16,12,26],[17,11,27],[17,12,27],[4,9,4],[7,9,4],[34,6,12],[34,7,28],[34,8,28],[34,9,28],[34,10,28],[34,11,28],[34,12,28],[37,12,30],[36,11,16],[36,12,16],[38,11,16],[38,12,16],[37,11,14],[36,10,13],[38,10,13],[37,10,15],[37,9,16],[37,8,13],[1,12,17],[2,12,18],[3,12,19],[21,12,23],[22,11,23],[23,10,23],[24,11,24],[25,10,25],[26,11,25],[27,12,25],[24,9,9],[24,10,8],[23,11,8],[22,12,8],[23,12,8],[24,12,8],[25,12,8],[25,11,8],[26,12,8],[29,12,1],[30,12,1],[30,11,1],[31,12,1],[31,11,1],[31,10,1],[32,12,1],[32,11,1],[32,10,1],[32,9,1],[19,4,20],[20,4,21],[21,4,21],[22,4,21],[23,4,22],[19,3,5],[20,3,6],[21,3,6],[22,3,6],[23,3,7]],M:[]}});for(var i=0;i<10;i++)this.addObject(new r(this))}render(){this.viewport.clear(),super.render()}}class r extends n.Sprite{constructor(t){super(t,{frames:[12],image:o.fetch("./tilemap.png")}),this.scope=t,this.state.gravity.y=.5,this.state.friction={x:.005,y:.005},this.state.vel={x:5*(Math.random()-.5),y:5*(Math.random()-.5)},this.state.size={x:32,y:32},this.state.pos={x:t.state.size.x/2-this.state.size.x/2,y:t.state.size.y/2-this.state.size.y}}update(){super.update(),(this.state.pos.x+this.state.size.x>this.scope.state.size.x||this.state.pos.x<0)&&(this.state.vel.x*=-1),(this.state.pos.y+this.state.size.y>this.scope.state.size.y||this.state.pos.y<0)&&(this.state.vel.y*=-1),this.state.pos.y=this.state.pos.y.boundary(this.state.size.y,this.scope.state.size.y-this.state.size.y)}render(){super.render()}}class a{constructor(t,e){this.scope=t,this.map=e.map||{},this.image=e.image||new Image;class s extends n.Sprite{constructor(t,e){super(t,{frames:e.frames}),this.scope=t,this.state.image=e.image,this.state.size=e.size,this.state.pos=e.pos}}this.map.m.forEach(t=>{console.log(t[0]*this.map.w+" "+t[1]*this.map.h+" "+t[2]),this.scope.entities.push(new s(this.scope,{image:this.image,pos:{x:t[0]*this.map.w,y:t[1]*this.map.h},frames:[t[2]],size:{x:this.map.w,y:this.map.h}}))})}}var o=new n.Loader;o.load(["./tilemap.png"],function(){new i("#container",1024,512)})},function(t,e,s){"use strict";s.r(e),function(t,n){s.d(e,"Craters",function(){return c});var i=s(3);s.d(e,"Canvas",function(){return i.a}),s.d(e,"Loop",function(){return i.b});var r=s(1);s.d(e,"Game",function(){return r.b}),s.d(e,"Entity",function(){return r.a}),s.d(e,"Sprite",function(){return r.c});var a=s(4);s.d(e,"Loader",function(){return a.a});var o=s(5);s.d(e,"Sound",function(){return o.a});Number.prototype.boundary=function(t,e){return Math.min(Math.max(this,t),e)},"undefined"==typeof window&&t&&(t.window={performance:{now:function(t){if(!t)return Date.now();var e=Date.now(t);return Math.round(1e3*e[0]+e[1]/1e6)}},requestAnimationFrame:function(t){n(()=>t(this.performance.now()))}});class c{static version(){return"1.2.0"}}}.call(this,s(2),s(8).setImmediate)},function(t,e,s){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},s(9),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,s(2))},function(t,e,s){(function(t,e){!function(t,s){"use strict";if(!t.setImmediate){var n,i,r,a,o,c=1,u={},h=!1,l=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,s=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=s,e}}()?t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){r.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,n=function(t){var e=l.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),n=function(e){t.postMessage(a+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),s=0;s<e.length;s++)e[s]=arguments[s+1];var i={callback:t,args:e};return u[c]=i,n(c),c++},d.clearImmediate=f}function f(t){delete u[t]}function p(t){if(h)setTimeout(p,0,t);else{var e=u[t];if(e){h=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(s,n)}}(e)}finally{f(t),h=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,s(2),s(10))},function(t,e){var s,n,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var c,u=[],h=!1,l=-1;function d(){h&&c&&(h=!1,c.length?u=c.concat(u):l=-1,u.length&&f())}function f(){if(!h){var t=o(d);h=!0;for(var e=u.length;e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];u.push(new p(t,e)),1!==u.length||h||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}]);