!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=5)}({5:function(t,e,s){"use strict";s.r(e),s.d(e,"Canvas",function(){return a}),s.d(e,"Craters",function(){return f}),s.d(e,"Entity",function(){return h}),s.d(e,"Game",function(){return c}),s.d(e,"Loader",function(){return d}),s.d(e,"Loop",function(){return o}),s.d(e,"Maths",function(){return r}),s.d(e,"Sound",function(){return l}),s.d(e,"Sprite",function(){return u});const n=function(t){return 180*t/Math.PI},i=function(t,e){this.x=t||0,this.y=e||0};i.prototype={clone:function(){return new i(this.x,this.y)},set:function(t,e){return"x"===t?this.x=e:"y"===t&&(this.y=e),this},add:function(){let t,e,s=arguments;if(1===s.length){let n=s[0];"object"==typeof n&&(t=n.x,e=n.y)}else 2===s.length&&"number"==typeof s[0]&&"number"==typeof s[1]&&(t=s[0],e=s[1]);return this.x+=t,this.y+=e,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return"object"==typeof t?(this.x*=t.x,this.y*=t.y):"number"==typeof t&&(this.x*=t,this.y*=t),this},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},magnitudeSq:function(){return this.x*this.x+this.y*this.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},rotate:function(t){let e=Math.sin(t),s=Math.cos(t),n=this.x*s-this.y*e,i=this.x*e+this.y*s;return this.x=n,this.y=i,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},angleTo:function(t){let e=this.magnitude(),s=t.magnitude(),n=this.dot(t);return Math.acos(n/(e*s))},getAngle:function(t){if("DEGREES"===t)return n(Math.atan(this.y/this.x));let e=Math.atan2(this.y,this.x);return e<0?2*Math.PI+e:e},normalize:function(){let t=this.magnitude();return this.x/=t,this.y/=t,this},perp:function(t){if("right"===t){let t=this.x;this.x=this.y,this.y=-t}else{let t=this.x;this.x=-this.y,this.y=t}return this},distanceTo:function(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))},scalarProject:function(t){return this.dot(t)/t.magnitude()},scalarProjectUnit:function(t){return this.dot(t)},vectorProject:function(t){let e=this.dot(t)/t.magnitudeSq();return this.x=t.x*e,this.y=t.y*e,this},vectorProjectUnit:function(t){let e=this.dot(t);return this.x=t.x*e,this.y=t.y*e,this}},i.prototype.translate=i.prototype.add,i.add=function(t,e){return new i(t.x+e.x,t.y+e.y)},i.subtract=function(t,e){return new i(t.x-e.x,t.y-e.y)},i.multiply=function(t,e){return"number"==typeof t&&"number"==typeof e?t*e:"object"==typeof t&&"number"==typeof e?new i(t.x*e,t.y*e):"object"==typeof e&&"number"==typeof t?new i(t*e.x,t*e.y):new i(t.x*e.x,t.y*e.y)},i.dot=function(t,e){return t.x*e.x+t.y*e.y},i.angleBetween=function(t,e){let s=t.magnitude(),n=e.magnitude(),i=t.dot(e);return Math.acos(i/(s*n))},i.perp=function(t,e){switch(e){case"right":return new i(t.y,-t.x);default:return new i(-t.y,t.x)}},i.negate=function(t){return new i(-t.x,-t.y)};var r=Object.freeze({Vector:i,boundary:function(t,e,s){return Math.min(Math.max(t,e),s)},degToRad:function(t){return t*Math.PI/180},radToDeg:n,distance:function(t,e,s,n){return Math.sqrt((s-t)*(s-t)+(n-e)*(n-e))},map:function(t,e,s,n,i){return n+(i-n)*(t-e)/(s-e)}});class o{constructor(t,e){var s={elapsed:0,tframe:1e3/e,nframe:e,before:window.performance.now(),main:function(){s.startLoop=window.requestAnimationFrame(s.main),s.delta=Math.round(1e3/(window.performance.now()-s.before)*100/100),window.performance.now()<s.before+s.tframe||(s.before=window.performance.now(),s.stopLoop=()=>{window.cancelAnimationFrame(s.startLoop)},t.state.loop=s,t.update(s.elapsed,s.delta),t.render(s.elapsed,s.delta),s.elapsed++)}};return s.main(),s}}class a{constructor(t,e,s){s=document.querySelector(s||"body");var n=document.createElement("canvas"),i=n.getContext("2d"),r=window.devicePixelRatio/["webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio"].reduce(function(t,e){return Object.prototype.hasOwnProperty.call(i,e)?i[e]:1});return n.width=Math.round(t*r),n.height=Math.round(e*r),n.style.width=t+"px",n.style.height=e+"px",i.setTransform(r,0,0,r,0,0),s.insertBefore(n,s.firstChild),n.context=n.getContext("2d"),n.resize=(t,e)=>{n.style.width=e.x+"px",n.style.height=e.y+"px",n.width=Math.round(e.x*r),n.height=Math.round(e.y*r),i.setTransform(r,0,0,r,0,0),t.state.size.x=e.x,t.state.size.y=e.y},n.clear=(t,e,s,i,r)=>{t=t||null,e=e||0,s=s||0,i=i||n.width,r=r||n.height,t?(n.context.save(),n.context.fillStyle=t,n.context.fillRect(e,s,i,r),n.context.fill(),n.context.restore()):n.context.clearRect(e,s,i,r)},n.camera=(t,e)=>{n.context.setTransform(1,0,0,1,0,0),n.context.translate(-t,-e)},n}}class c{constructor(){this.entities=[],this.state={size:new i(1024,512),gravity:new i(0,0),friction:new i(0,0)}}addObject(t){return this.entities.push(t)}removeObject(t){return this.entities.splice(t,1)}update(t,e){this.entities.forEach(t=>{switch(t.state.loop=this.state.loop,t.update(),t.type){case"dynamic":t.state.vel.x+=t.state.accel.x+(t.state.gravity.x+this.state.gravity.x),t.state.vel.y+=t.state.accel.y+(t.state.gravity.y+this.state.gravity.y),t.state.pos.x+=t.state.vel.x*(1/((t.state.loop.delta+t.state.loop.nframe)/2)),t.state.pos.y+=t.state.vel.y*(1/((t.state.loop.delta+t.state.loop.nframe)/2));var e=t.state.friction.x,s=t.state.vel.x+e,n=t.state.vel.x-e,i=t.state.friction.y,r=t.state.vel.y+i,o=t.state.vel.y-i;t.state.vel.x=s<0?s:n>0?n:0,t.state.vel.y=r<0?r:o>0?o:0;break;case"static":t.state.vel.x+=t.state.accel.x,t.state.vel.y+=t.state.accel.y,t.state.pos.x+=t.state.vel.x,t.state.pos.y+=t.state.vel.y}})}render(){this.entities.forEach(t=>{t.render()})}}class h extends c{constructor(){super(),this.state.size=new i(20,20),this.state.pos=new i(0,0),this.state.vel=new i(0,0),this.state.accel=new i(0,0),this.state.radius=20,this.state.angle=0,this.type="dynamic"}}class u extends h{constructor(t,e){super(),this.scope=t,this.state.pos=e.pos||new i(0,0),this.state.crop=new i(0,0),this.state.size=e.size||new i(0,0),this.state.frames=e.frames||[],this.state.angle=e.angle||0,this.state.image=e.image||new Image,this.state.delay=e.delay||5,this.state.tick=e.tick||0,this.state.orientation=e.orientation||"horizontal"}update(){super.update(),this.state.tick<=0&&("vertical"===this.orientation?(this.state.crop.y=this.state.frames.shift(),this.state.frames.push(this.state.crop.y)):(this.state.crop.x=this.state.frames.shift(),this.state.frames.push(this.state.crop.x)),this.state.tick=this.state.delay),this.state.tick--}render(){super.render(),this.scope.context.save(),this.scope.context.translate(this.state.crop.x+this.state.size.x/2,this.state.crop.y+this.state.size.y/2),this.scope.context.rotate(this.state.angle*(Math.PI/180)),this.scope.context.translate(-(this.state.crop.x+this.state.size.x/2),-(this.state.crop.y+this.state.size.y/2)),this.scope.context.drawImage(this.state.image,this.state.crop.x*this.state.size.x,this.state.crop.y*this.state.size.y,this.state.size.x,this.state.size.y,this.state.pos.x,this.state.pos.y,this.state.size.x,this.state.size.y),this.scope.context.restore()}}class d{constructor(){this.rescache={}}load(t,e){var s=this;t instanceof Array?t.forEach(function(t){s.rescache[t]=!1,s.fetch(t,e)}):(s.rescache[t]=!1,s.fetch(t,e))}fetch(t,e){var s=this;if(s.rescache[t])return s.rescache[t];var n=new Image;n.onload=function(){s.rescache[t]=n,s.ready(e)},n.src=t}ready(t){if("function"==typeof t){var e=!0;for(var s in this.rescache)Object.prototype.hasOwnProperty.call(this.rescache,s)&&!this.rescache[s]&&(e=!1);e&&t()}}}class l{constructor(){this.sounds={},this.instances=[],this.defaultVolume=1}load(t,e,s){if(this.sounds[t]=new Audio(e),"function"!=typeof s)return new Promise((e,s)=>{this.sounds[t].addEventListener("canplaythrough",e),this.sounds[t].addEventListener("error",s)});this.sounds[t].addEventListener("canplaythrough",s)}remove(t){void 0!==this.sounds&&delete this.sounds[t]}unlock(t,e,s,n){var i=this,r=["touchstart","touchend","mousedown","keydown"],o=function o(){r.forEach(function(t){document.body.removeEventListener(t,o)}),i.play(t,e,s,n)};r.forEach(function(t){document.body.addEventListener(t,o,!1)})}play(t,e,s,n){if(n=n||!1,void 0===this.sounds[t])return console.error("Can't find sound called '"+t+"'."),!1;var i=this.sounds[t].cloneNode(!0);return i.volume="number"==typeof s?s:this.defaultVolume,i.loop=n,i.play(),this.instances.push(i),i.addEventListener("ended",()=>{var t=this.instances.indexOf(i);-1!==t&&this.instances.splice(t,1)}),"function"==typeof e?(i.addEventListener("ended",e),!0):new Promise((t,e)=>i.addEventListener("ended",t))}stopAll(){var t=this.instances.slice();for(var e of t)e.pause(),e.dispatchEvent(new Event("ended"))}}"undefined"==typeof window&&global&&(global.window={performance:{now:function(t){if(!t)return Date.now();var e=Date.now(t);return Math.round(1e3*e[0]+e[1]/1e6)}},requestAnimationFrame:function(t){setImmediate(()=>t(this.performance.now()))}});class f{static version(){return"1.2.2"}}}});